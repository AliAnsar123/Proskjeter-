(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8d3d9be6"],{"1f4f":function(t,e,i){"use strict";var s=i("5530"),a=(i("a9e3"),i("8b37"),i("80d2")),r=i("7560"),n=i("58df");e["a"]=Object(n["a"])(r["a"]).extend({name:"v-simple-table",props:{dense:Boolean,fixedHeader:Boolean,height:[Number,String]},computed:{classes:function(){return Object(s["a"])({"v-data-table--dense":this.dense,"v-data-table--fixed-height":!!this.height&&!this.fixedHeader,"v-data-table--fixed-header":this.fixedHeader,"v-data-table--has-top":!!this.$slots.top,"v-data-table--has-bottom":!!this.$slots.bottom},this.themeClasses)}},methods:{genWrapper:function(){return this.$slots.wrapper||this.$createElement("div",{staticClass:"v-data-table__wrapper",style:{height:Object(a["e"])(this.height)}},[this.$createElement("table",this.$slots.default)])}},render:function(t){return t("div",{staticClass:"v-data-table",class:this.classes},[this.$slots.top,this.genWrapper(),this.$slots.bottom])}})},"2a7f":function(t,e,i){"use strict";i.d(e,"a",(function(){return r}));var s=i("71d9"),a=i("80d2"),r=Object(a["g"])("v-toolbar__title"),n=Object(a["g"])("v-toolbar__items");s["a"]},"8b37":function(t,e,i){},"9d01":function(t,e,i){},ef9d:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.isLoading?t._e():i("v-container",{staticClass:"my-5",staticStyle:{"max-width":"32rem"}},[i("v-form",{ref:"form",model:{value:t.isFormValid,callback:function(e){t.isFormValid=e},expression:"isFormValid"}},[i("v-simple-table",{attrs:{dense:""},scopedSlots:t._u([{key:"top",fn:function(){return[i("v-toolbar",{attrs:{flat:""}},[i("v-toolbar-title",[t._v("Create new route time")])],1)]},proxy:!0}],null,!1,3101489409)},[i("tbody",[i("tr",[i("th",[t._v("Property")]),i("th",[t._v("Value")])]),i("tr",[i("td",[t._v("Route")]),i("td",[i("v-select",{attrs:{items:t.routes,"item-text":t.itemText,"item-value":"id",rules:[t.ruleRequired]},model:{value:t.routetime.route.id,callback:function(e){t.$set(t.routetime.route,"id",e)},expression:"routetime.route.id"}})],1)]),i("tr",[i("td",[t._v("Price")]),i("td",[i("v-text-field",{attrs:{type:"number",rules:[t.ruleRequired,t.rulePrice]},model:{value:t.routetime.price,callback:function(e){t.$set(t.routetime,"price",e)},expression:"routetime.price"}})],1)]),i("tr",[i("td",[t._v("Direction")]),i("td",[i("v-switch",{model:{value:t.routetime.direction,callback:function(e){t.$set(t.routetime,"direction",e)},expression:"routetime.direction"}})],1)]),i("tr",[i("td",[t._v("Date")]),i("td",[i("v-text-field",{attrs:{rules:[t.ruleRequired,t.ruleDate]},model:{value:t.routetime.date,callback:function(e){t.$set(t.routetime,"date",e)},expression:"routetime.date"}})],1)])])])],1),i("v-row",{staticClass:"pa-5",attrs:{justify:"space-between"}},[i("v-btn",{staticClass:"error",on:{click:t.cancel}},[t._v("Cancel")]),i("v-btn",{staticClass:"success",attrs:{disabled:!t.isFormValid},on:{click:t.save}},[t._v("Save")])],1)],1)},a=[],r=i("5530"),n=i("1da1"),o=(i("96cf"),i("ac1f"),i("00b4"),i("d3b7"),i("e9c4"),i("d81d"),i("b0c0"),{name:"CreateRouteTime",data:function(){return{routetime:{route:{id:null},price:0,date:"2021-11-25",direction:0},routes:Array,isFormValid:Boolean,isLoading:!0,ruleRequired:function(t){return!!t||"Required"},ruleDate:function(t){return/^\d{4}-\d{2}-\d{2}$/.test(t)||"Date must be of format YYYY-MM-DD"},rulePrice:function(t){return/^\d{1,5}$/.test(t)||"Pric must be between 1 and 5 digits"}}},watch:{routetime:{handler:function(){this.$refs.form.validate()},deep:!0}},computed:{itemText:function(){return 0==this.routetime.direction?"name":"nameReverse"}},methods:{cancel:function(){this.$router.push("/admin")},save:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.$refs.form.validate(),console.log(this.routetime.direction),!this.isFormValid){t.next=15;break}return t.next=5,fetch("/api/routetimes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({route:{id:this.routetime.route.id},date:this.routetime.date,price:parseInt(this.routetime.price),direction:this.routetime.direction?0:1})});case 5:if(e=t.sent,!e.ok){t.next=10;break}this.$router.push("/admin"),t.next=15;break;case 10:return t.next=12,e.text();case 12:i=t.sent,alert(i),"Unauthorized"==i&&this.$router.push("/login");case 15:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},mounted:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/routes");case 2:return i=e.sent,e.next=5,i.json();case 5:s=e.sent,t.routes=s.map((function(t){return Object(r["a"])(Object(r["a"])({},t),{},{name:t.origin.name+" - "+t.destination.name,nameReverse:t.destination.name+" - "+t.origin.name})})),t.isLoading=!1;case 8:case"end":return e.stop()}}),e)})))()}}),c=o,u=i("2877"),l=i("6544"),d=i.n(l),h=i("8336"),m=i("a523"),f=i("4bd4"),p=i("0fd9"),v=i("b974"),b=i("1f4f"),g=i("15fd"),w=(i("0481"),i("4069"),i("ec29"),i("9d01"),i("fe09")),x=i("c37a"),$=i("c3f0"),C=i("0789"),_=i("490a"),S=i("80d2"),k=["title"],j=w["a"].extend({name:"v-switch",directives:{Touch:$["a"]},props:{inset:Boolean,loading:{type:[Boolean,String],default:!1},flat:{type:Boolean,default:!1}},computed:{classes:function(){return Object(r["a"])(Object(r["a"])({},x["a"].options.computed.classes.call(this)),{},{"v-input--selection-controls v-input--switch":!0,"v-input--switch--flat":this.flat,"v-input--switch--inset":this.inset})},attrs:function(){return{"aria-checked":String(this.isActive),"aria-disabled":String(this.isDisabled),role:"switch"}},validationState:function(){return this.hasError&&this.shouldValidate?"error":this.hasSuccess?"success":null!==this.hasColor?this.computedColor:void 0},switchData:function(){return this.setTextColor(this.loading?void 0:this.validationState,{class:this.themeClasses})}},methods:{genDefaultSlot:function(){return[this.genSwitch(),this.genLabel()]},genSwitch:function(){var t=this.attrs$,e=(t.title,Object(g["a"])(t,k));return this.$createElement("div",{staticClass:"v-input--selection-controls__input"},[this.genInput("checkbox",Object(r["a"])(Object(r["a"])({},this.attrs),e)),this.genRipple(this.setTextColor(this.validationState,{directives:[{name:"touch",value:{left:this.onSwipeLeft,right:this.onSwipeRight}}]})),this.$createElement("div",Object(r["a"])({staticClass:"v-input--switch__track"},this.switchData)),this.$createElement("div",Object(r["a"])({staticClass:"v-input--switch__thumb"},this.switchData),[this.genProgress()])])},genProgress:function(){return this.$createElement(C["c"],{},[!1===this.loading?null:this.$slots.progress||this.$createElement(_["a"],{props:{color:!0===this.loading||""===this.loading?this.color||"primary":this.loading,size:16,width:2,indeterminate:!0}})])},onSwipeLeft:function(){this.isActive&&this.onChange()},onSwipeRight:function(){this.isActive||this.onChange()},onKeydown:function(t){(t.keyCode===S["v"].left&&this.isActive||t.keyCode===S["v"].right&&!this.isActive)&&this.onChange()}}}),y=i("8654"),O=i("71d9"),V=i("2a7f"),R=Object(u["a"])(c,s,a,!1,null,null,null);e["default"]=R.exports;d()(R,{VBtn:h["a"],VContainer:m["a"],VForm:f["a"],VRow:p["a"],VSelect:v["a"],VSimpleTable:b["a"],VSwitch:j,VTextField:y["a"],VToolbar:O["a"],VToolbarTitle:V["a"]})}}]);
//# sourceMappingURL=chunk-8d3d9be6.3e1c05c8.js.map
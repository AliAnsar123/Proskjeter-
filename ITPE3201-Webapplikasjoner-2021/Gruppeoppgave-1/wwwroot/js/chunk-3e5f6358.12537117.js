(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3e5f6358"],{"1f4f":function(t,e,r){"use strict";var n=r("5530"),a=(r("a9e3"),r("8b37"),r("80d2")),i=r("7560"),s=r("58df");e["a"]=Object(s["a"])(i["a"]).extend({name:"v-simple-table",props:{dense:Boolean,fixedHeader:Boolean,height:[Number,String]},computed:{classes:function(){return Object(n["a"])({"v-data-table--dense":this.dense,"v-data-table--fixed-height":!!this.height&&!this.fixedHeader,"v-data-table--fixed-header":this.fixedHeader,"v-data-table--has-top":!!this.$slots.top,"v-data-table--has-bottom":!!this.$slots.bottom},this.themeClasses)}},methods:{genWrapper:function(){return this.$slots.wrapper||this.$createElement("div",{staticClass:"v-data-table__wrapper",style:{height:Object(a["e"])(this.height)}},[this.$createElement("table",this.$slots.default)])}},render:function(t){return t("div",{staticClass:"v-data-table",class:this.classes},[this.$slots.top,this.genWrapper(),this.$slots.bottom])}})},"2a7f":function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));var n=r("71d9"),a=r("80d2"),i=Object(a["g"])("v-toolbar__title"),s=Object(a["g"])("v-toolbar__items");n["a"]},"8b37":function(t,e,r){},eec8:function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.isLoading?t._e():r("v-container",{staticClass:"my-5",staticStyle:{"max-width":"32rem"}},[r("v-form",{ref:"form",model:{value:t.isFormValid,callback:function(e){t.isFormValid=e},expression:"isFormValid"}},[r("v-simple-table",{attrs:{dense:""},scopedSlots:t._u([{key:"top",fn:function(){return[r("v-toolbar",{attrs:{flat:""}},[r("v-toolbar-title",[t._v("Edit route")])],1)]},proxy:!0}],null,!1,1138756880)},[r("tbody",[r("tr",[r("th",[t._v("Property")]),r("th",[t._v("Value")])]),r("tr",[r("td",[t._v("Origin port")]),r("td",[r("v-select",{attrs:{items:t.ports,"item-text":"name","item-value":"id",rules:[t.ruleRequired,t.ruleUnique]},model:{value:t.route.origin.id,callback:function(e){t.$set(t.route.origin,"id",e)},expression:"route.origin.id"}})],1)]),r("tr",[r("td",[t._v("Destination port")]),r("td",[r("v-select",{attrs:{items:t.ports,"item-text":"name","item-value":"id",rules:[t.ruleRequired,t.ruleUnique]},model:{value:t.route.destination.id,callback:function(e){t.$set(t.route.destination,"id",e)},expression:"route.destination.id"}})],1)]),r("tr",[r("td",[t._v("Company")]),r("td",[r("v-select",{attrs:{items:t.companies,"item-text":"name","item-value":"id",rules:[t.ruleRequired]},model:{value:t.route.company.id,callback:function(e){t.$set(t.route.company,"id",e)},expression:"route.company.id"}})],1)])])])],1),r("v-row",{staticClass:"pa-5",attrs:{justify:"space-between"}},[r("v-btn",{on:{click:t.cancel}},[t._v("Cancel")]),r("v-btn",{staticClass:"error",on:{click:t.deleteRoute}},[t._v("Delete")]),r("v-btn",{staticClass:"success",attrs:{disabled:!t.isFormValid},on:{click:t.save}},[t._v("Save")])],1)],1)},a=[],i=r("1da1"),s=(r("96cf"),r("d3b7"),r("e9c4"),{name:"EditRoute",data:function(){return{route:{origin:{id:null},destination:{id:null},company:{id:null}},companies:Array,ports:Array,isFormValid:Boolean,isLoading:!0,ruleRequired:function(t){return!!t||"Required"}}},computed:{ruleUnique:function(){var t=this;return function(){return t.route.origin.id!=t.route.destination.id||"Origin and destination cannot be the same"}}},watch:{route:{handler:function(){this.$refs.form.validate()},deep:!0}},methods:{cancel:function(){this.$router.push("/admin")},deleteRoute:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("/api/routes/".concat(this.$route.params.id),{method:"DELETE"});case 2:if(e=t.sent,!e.ok){t.next=7;break}this.$router.push("/admin"),t.next=13;break;case 7:return t.t0=alert,t.next=10,e.text();case 10:t.t1=t.sent,(0,t.t0)(t.t1),"Unauthorized"==e.text&&this.$router.push("/login");case 13:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),save:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.$refs.form.validate(),!this.isFormValid){t.next=14;break}return t.next=4,fetch("/api/routes/".concat(this.$route.params.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.route)});case 4:if(e=t.sent,!e.ok){t.next=9;break}this.$router.push("/admin"),t.next=14;break;case 9:return t.next=11,e.text();case 11:r=t.sent,alert(r),"Unauthorized"==r&&this.$router.push("/login");case 14:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},mounted:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/ports");case 2:return r=e.sent,e.next=5,r.json();case 5:return t.ports=e.sent,e.next=8,fetch("/api/companies");case 8:return n=e.sent,e.next=11,n.json();case 11:t.companies=e.sent,fetch("/api/routes/".concat(t.$route.params.id)).then((function(t){if(!t.ok)throw new Error;return t.json()})).then((function(e){t.route=e,t.isLoading=!1})).catch((function(){return t.$router.push("/login")}));case 13:case"end":return e.stop()}}),e)})))()}}),o=s,u=r("2877"),c=r("6544"),l=r.n(c),d=r("8336"),h=r("a523"),p=r("4bd4"),m=r("0fd9"),f=r("b974"),v=r("1f4f"),b=r("71d9"),x=r("2a7f"),g=Object(u["a"])(o,n,a,!1,null,null,null);e["default"]=g.exports;l()(g,{VBtn:d["a"],VContainer:h["a"],VForm:p["a"],VRow:m["a"],VSelect:f["a"],VSimpleTable:v["a"],VToolbar:b["a"],VToolbarTitle:x["a"]})}}]);
//# sourceMappingURL=chunk-3e5f6358.12537117.js.map